var beautifulDlyrics=(()=>{var t=new Set;function i(){for(;;){var e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)});if(!1===t.has(e))return t.add(e),e}}var n,e,r,o=class{constructor(){this.Items=new Map,this.DestroyedState=!1}Push(e){var t=i();return this.Items.set(t,e),t}Get(e){return this.Items.get(e)}Remove(e){var t=this.Items.get(e);if(void 0!==t)return this.Items.delete(e),t}GetIterator(){return this.Items.entries()}IsDestroyed(){return this.DestroyedState}Destroy(){this.DestroyedState||(this.DestroyedState=!0,delete this.Items)}},s=class{constructor(e,t){this.ConnectionReferences=e,this.Callback=t,this.Disconnected=!1,this.Location=e.Push({Callback:t,Connection:this})}Disconnect(){this.Disconnected||(this.Disconnected=!0,this.ConnectionReferences.Remove(this.Location),delete this.Location,delete this.Callback,delete this.SignalConnections)}IsDisconnected(){return this.Disconnected}},a=class{constructor(e){this.Signal=e}Connect(e){return this.Signal.Connect(e)}IsDestroyed(){return this.Signal.IsDestroyed()}},c=class{constructor(){this.ConnectionReferences=new o,this.DestroyedState=!1}Connect(e){if(this.DestroyedState)throw"Cannot connect to a Destroyed Signal";return new s(this.ConnectionReferences,e)}Fire(...e){if(this.DestroyedState)throw"Cannot fire a Destroyed Signal";for(var[t,i]of this.ConnectionReferences.GetIterator())i.Callback(...e)}GetEvent(){return new a(this)}IsDestroyed(){return this.DestroyedState}Destroy(){if(!this.DestroyedState){for(var[e,t]of this.ConnectionReferences.GetIterator())t.Connection.Disconnect();this.DestroyedState=!0,delete this.ConnectionReferences}}},l=e=>e instanceof s,d=class{constructor(e,t){this.Cleaner=e,this.Id=t}Cancel(){void 0!==this.Id&&(this.Cleaner(this.Id),delete this.Id,delete this.Cleaner)}},y=(e,t)=>new d(window.clearTimeout.bind(window),setTimeout(t,1e3*e)),u=e=>e instanceof d,h=class{constructor(){this.Items=new Map,this.DestroyedState=!1,this.DestroyingSignal=new c,this.CleanedSignal=new c,this.DestroyedSignal=new c,this.Destroying=this.DestroyingSignal.GetEvent(),this.Cleaned=this.CleanedSignal.GetEvent(),this.Destroyed=this.DestroyedSignal.GetEvent()}CleanItem(e){e instanceof h?e.Destroy():u(e)?e.Cancel():e instanceof MutationObserver||e instanceof ResizeObserver?e.disconnect():l(e)?e.Disconnect():e instanceof HTMLElement?e.remove():e()}Give(e,t){return this.DestroyedState?this.CleanItem(e):(t=t??i(),this.Has(t)&&this.Clean(t),this.Items.set(t,e)),e}GiveItems(...e){for(const t of e)this.Give(t);return Array.from(arguments)}Has(e){return this.Items.has(e)}Clean(e){var t=this.Items.get(e);void 0!==t&&(this.Items.delete(e),this.CleanItem(t))}CleanUp(){for(var[e,t]of this.Items)this.Clean(e);!1===this.DestroyedState&&this.CleanedSignal.Fire()}IsDestroyed(){return this.DestroyedState}Destroy(){!1===this.DestroyedState&&(this.DestroyedState=!0,this.DestroyingSignal.Fire(),this.CleanUp(),delete this.Items,this.DestroyedSignal.Fire(),this.DestroyingSignal.Destroy(),this.CleanedSignal.Destroy(),this.DestroyedSignal.Destroy(),delete this.DestroyingSignal,delete this.CleanedSignal,delete this.DestroyedSignal)}},m=document.currentScript,g=m.src.includes("https://xpui.app.spotify.com/"),v=Spicetify.Player,b=(Spicetify.CosmosAsync,new h),f=new c,p=()=>{var e=null==(e=null==(e=v.data)?void 0:e.track)?void 0:e.metadata,e=e?{Large:e.image_xlarge_url,Big:e.image_large_url,Default:e.image_url,Small:e.image_small_url}:void 0;(null==e?void 0:e.Default)!==(null==n?void 0:n.Default)&&(n=e,f.Fire(e))},j=(v.addEventListener("songchange",p),b.Give(()=>v.removeEventListener("songchange",p)),p(),f.GetEvent()),z=()=>n,_=7.5,T=1,H=5,w=e=>{e=e.match(/(\d+)\.(\d+)\.(\d+)(?:\.(\d+))?/);if(null!==e)return{Text:e[0],Major:parseInt(e[1]),Minor:parseInt(e[2]),Patch:parseInt(e[3]),Control:e[4]?parseInt(e[4]):void 0}},A=(e,t)=>{t={Text:"",Major:t.Major-e.Major,Minor:t.Minor-e.Minor,Patch:t.Patch-e.Patch,Control:void 0===t.Control&&void 0===e.Control?0:void 0===t.Control||void 0===e.Control?e.Control:t.Control-e.Control};return[t,0!==t.Major||0!==t.Minor||0!==t.Patch||0!==t.Control]},C=w("2.4.5"),B=e=>{b.Destroy(),null!=(t=document.querySelector("#beautifulDlyrics"))&&t.remove();var t=document.createElement("script");t.setAttribute("type","text/javascript"),t.innerHTML=e,document.body.appendChild(t),m.remove()},S=async()=>{let r=T;fetch("https://api.github.com/repos/surfbryce/beautiful-lyrics/contents/dist/beautiful-lyrics.js").then(e=>e.json()).then(e=>fetch("https://api.github.com/repos/surfbryce/beautiful-lyrics/git/blobs/"+e.sha)).then(e=>e.json()).then(e=>atob(e.content)).then(e=>{var t,i,n=w(e);if(void 0!==n)return[t,i]=A(C,n),i&&(2<n.Major||2==n.Major&&4<=n.Minor)?(Spicetify.showNotification(`<h3>Beautiful Lyrics Updated!</h3>
				<h4 style = 'margin-top: 4px; margin-bottom: 4px; font-weight: normal;'>No need to re-install - it's already running!</h4>
				<span style = 'opacity: 0.75;'>Version ${C.Text} -> ${n.Text}</span>`,t.Major<0||t.Minor<0||t.Patch<0||0<t.Major,1e3*_),B(e)):void(r=H)}).catch(e=>console.warn("Error: "+e)).finally(()=>b.Give(y(60*r,S),"CheckForUpdate"))};if(!1===g){const x=()=>{void 0===Spicetify.showNotification?b.Give(y(0,x),"WaitForSpicetifyNotification"):S()};x()}{const D=new Map,k=(D.set("VanillaFullScreen","#main:has(.os-content .lyrics-lyrics-container) .under-main-view"),D.set("VanillaSideCard","aside:has(.main-nowPlayingView-section) .os-padding"),D.set("LyricsPlusFullScreen","#main:has(.os-content .lyrics-lyricsContainer-LyricsContainer) .under-main-view"),b.Give(new h,"LiveBackgrounds"));e=()=>{for(var[e,t]of D){t=document.body.querySelector(t);(k.Has(e)?null===t:null!==t)&&(null===t?k.Clean(e):((e,t)=>{var e=k.Give(new h,e),i=e.Give(document.createElement("div"));i.classList.add("lyrics-background-container");const[n,r,o]=e.GiveItems(document.createElement("img"),document.createElement("img"),document.createElement("img"));n.classList.add("lyrics-background-color"),r.classList.add("lyrics-background-back"),o.classList.add("lyrics-background-back-center"),i.appendChild(n),i.appendChild(r),i.appendChild(o);var s=()=>{var e=null!=(e=null==(e=z())?void 0:e.Default)?e:"";n.src=e,r.src=e,o.src=e},s=(e.Give(j.Connect(s)),s(),()=>{t.classList.contains("lyrics-background")||t.classList.add("lyrics-background")});s(),e.Give(new MutationObserver(s)).observe(t,{attributes:!0,attributeFilter:["class"],childList:!1,subtree:!1}),t.prepend(i),e.Give(()=>t.classList.remove("lyrics-background"))})(e,t))}}}{const I=4,L=.5,M=b.Give(new h,"Lyrics"),G=new Map,P=(G.set("VanillaFullScreen",".lyrics-lyrics-contentWrapper"),G.set("VanillaSideCard",".main-nowPlayingView-lyricsContent"),"lyrics-lyricsContent-lyric"),V="lyrics-lyricsContent-unsynced",E="lyrics-lyricsContent-highlight",F="lyrics-lyricsContent-active",R=e=>{var e=getComputedStyle(e),t=getComputedStyle(document.documentElement);return parseFloat(e.fontSize)/parseFloat(t.fontSize)},O=(e,r)=>{const o=M.Give(new h,e),s=new Map;let a=0;const c=(e,t)=>{e.style.fontSize="Active"==t.State?a+L+"rem":""},l=()=>{let t;for(var[e,i]of s){e=e.classList;e.contains(F)?(i.State="Active",t=i.LayoutOrder):e.contains(V)?i.State="Unsynced":e.contains(E)?i.State="Sung":i.State="Unsung"}for(var[n,r]of s){var o="Active"===r.State||"Unsynced"===r.State;let e;e=o?0:void 0===t?I:Math.min(Math.abs(r.LayoutOrder-t),I);o=o?"var(--lyrics-color-active)":"Sung"===r.State?"var(--lyrics-color-passed)":"var(--lyrics-color-inactive)";!1===n.classList.contains("lyric")&&n.classList.add("lyric"),c(n,r),n.style.color="transparent",n.style.textShadow=`0 0 ${e}px `+o}};{const d=t=>{if(t instanceof HTMLDivElement&&t.classList.contains(P)){var n=t;var t=o.Give(new h,n),i=Array.from(r.children).indexOf(n);t.Give(new MutationObserver(l)).observe(n,{attributes:!0,attributeFilter:["class"],childList:!1,subtree:!1});let e=!1;!1===o.Has("FontResizeObserver")&&0===n.innerText.length&&(o.Give(new ResizeObserver(e=>{a=R(n);for(var[t,i]of s)c(t,i)}),"FontResizeObserver").observe(n),t.Give(()=>o.Clean("FontResizeObserver")),e=!0),s.set(n,{LayoutOrder:i,State:"Unsung",IsFontSizeObserver:e}),l()}};o.Give(new MutationObserver(e=>{for(const t of e)if("childList"===t.type){for(const i of t.removedNodes)i instanceof HTMLDivElement&&(s.delete(i),o.Clean(i));for(const n of t.addedNodes)d(n)}})).observe(r,{attributes:!1,childList:!0,subtree:!1});for(const t of r.childNodes)d(t)}};r=()=>{for(var[e,t]of G){t=document.body.querySelector(t);(M.Has(e)?null===t:null!==t)&&(null===t?M.Clean(e):O(e,t))}}}var U=async function(){b.Give(new MutationObserver(()=>{e(),r()})).observe(document.body,{attributes:!1,childList:!0,subtree:!0}),e(),r()};(async()=>{await U()})()})();(async()=>{var e;document.getElementById("beautifulDlyrics")||((e=document.createElement("style")).id="beautifulDlyrics",e.textContent=String.raw`
  .main-lyricsCinema-controls,.main-nowPlayingView-lyricsControls{mix-blend-mode:overlay}.lyric:hover{text-shadow:0 0 0 var(--lyrics-color-active)!important}.lyrics-lyricsContent-active{margin-top:.25em;margin-bottom:.25em}aside:has(.main-nowPlayingView-section) .main-nowPlayingView-content{background:0 0}aside:has(.main-nowPlayingView-section) .lyrics-background .main-trackInfo-artists{opacity:.75;filter:brightness(1.15)}aside:has(.main-nowPlayingView-section) .main-nowPlayingView-coverArt{opacity:.85;box-shadow:rgba(0,0,0,.2705882353) 0 9px 20px 0}aside:has(.main-nowPlayingView-section) .main-nowPlayingView-section{background-color:var(--background-tinted-base)!important}#lyrics-cinema .os-scrollbar,.Root__main-view:has(.lyrics-background) .os-scrollbar,.os-host:has(.lyrics-background) .os-scrollbar{padding:5px}#lyrics-cinema .os-scrollbar .os-scrollbar-handle,.Root__main-view:has(.lyrics-background) .os-scrollbar .os-scrollbar-handle,.os-host:has(.lyrics-background) .os-scrollbar .os-scrollbar-handle{mix-blend-mode:overlay;background-color:rgba(252,249,249,.117)!important}.lyrics-lyrics-container,.main-nowPlayingView-section{--lyrics-color-inactive:rgb(240 240 240 / 51%)!important}.os-viewport .lyrics-lyrics-background{background:0 0}.os-viewport .lyrics-lyrics-container{margin-top:25vh}.os-viewport .lyrics-lyrics-container.lyrics-lyrics-coverTopBar{margin-top:7.5vh}.lyrics-lyricsContainer-LyricsBackground{background-color:transparent!important;background-image:none!important}#main:has(.under-main-view.lyrics-background) .Root__top-bar{mix-blend-mode:screen}.lyrics-background{overflow:hidden;position:static}.lyrics-background.main-nowPlayingView-sectionHeaderSpacing.main-nowPlayingView-lyricsGradient{background:0 0}.lyrics-background.os-viewport:not(:has(.main-nowPlayingView-content)){overflow:initial}#main:not(:has(.lyrics-lyricsContainer-LyricsBackground)) .lyrics-background.under-main-view>.lyrics-background-container{max-width:35%;max-height:30%;scale:290% 340%;transform-origin:left top}#main:has(.lyrics-lyricsContainer-LyricsBackground) .lyrics-background.under-main-view>.lyrics-background-container{max-width:25%;max-height:40%;scale:400% 250%;transform-origin:left top}#main:has(#lyrics-cinema .lyrics-lyrics-background) .lyrics-background.under-main-view .lyrics-background-container{z-index:1}.lyrics-background.os-padding:has(.main-nowPlayingView-content) .lyrics-background-container{border-radius:8px;filter:saturate(2) brightness(.7)}.lyrics-background-container{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;overflow:hidden;filter:saturate(1.5) brightness(.8)}.lyrics-background-back,.lyrics-background-back-center,.lyrics-background-color{width:200%;position:absolute;border-radius:100em;animation:rotate 35s linear infinite}.lyrics-background-color{right:0;top:0;filter:blur(40px);z-index:10;mix-blend-mode:revert}.lyrics-background-back{left:0;bottom:0;filter:blur(40px);z-index:1;animation-direction:reverse}.lyrics-background-back-center{filter:blur(40px);z-index:0;width:300%;right:-50%;top:-20%;animation-direction:reverse}@keyframes rotate{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}:root{--beautiful-lyrics-random-degree:258deg}@keyframes rotate{0%{transform:rotate(var(--beautiful-lyrics-random-degree))}100%{transform:rotate(calc(var(--beautiful-lyrics-random-degree) + 360deg))}}
      `.trim(),document.head.appendChild(e))})();