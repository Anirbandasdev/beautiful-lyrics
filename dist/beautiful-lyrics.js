var beautifulDlyrics=(()=>{var l,i=Spicetify.Player,a=new Map,e=()=>{var e=null==(e=null==(e=i.data)?void 0:e.track)?void 0:e.metadata,e=e?{Large:e.image_xlarge_url,Big:e.image_large_url,Defualt:e.image_url,Small:e.image_small_url}:void 0;if((null==e?void 0:e.Defualt)!==(null==l?void 0:l.Defualt)){l=e;for(var[t,r]of a)r()}},n=(i.addEventListener("songchange",e),e(),"os-viewport .lyrics-lyrics-container"),o="main-nowPlayingView-sectionHeaderSpacing",c={NowPlaying:void 0,FullScreen:void 0},s={NowPlaying:void 0,FullScreen:void 0},d=(e,t)=>{var r;e!==c[t]&&(null!=(r=s[t])&&r.call(s),s[t]=void 0,e&&(s[t]=(e=>{const t=document.createElement("div"),r=(t.classList.add("lyrics-background-container"),document.createElement("img")),i=document.createElement("img");r.classList.add("lyrics-background-color"),i.classList.add("lyrics-background-back"),t.appendChild(r),t.appendChild(i);var n=()=>{var e=null!=(e=null==l?void 0:l.Defualt)?e:"";r.src=e,i.src=e},n=(a.set(e,n),n(),()=>{e.classList.contains("lyrics-background")||e.classList.add("lyrics-background")});n();const o=new MutationObserver(n);return o.observe(e,{attributes:!0,attributeFilter:["class"],childList:!1,subtree:!1}),e.prepend(t),()=>{o.disconnect(),t.remove(),e.classList.remove("lyrics-background"),a.delete(e)}})(e)),c[t]=null!=e?e:void 0)},t=()=>{var e,t=document.body.querySelector("."+o),r=document.body.querySelector("."+n);r=null!=(e=null==(r=null!=(e=null==r?void 0:r.parentElement)?e:null)?void 0:r.parentElement)?e:null,d(t,"NowPlaying"),d(r,"FullScreen")},r="lyrics-lyrics-contentWrapper",u="main-nowPlayingView-lyricsContent",y={NowPlaying:void 0,FullScreen:void 0},v={NowPlaying:void 0,FullScreen:void 0},m=t=>{const l=new Map;let a=0;const c=(e,t)=>{e.style.fontSize="Active"==t.State?a+.5+"rem":""},r=()=>{let t;for(var[e,r]of l){e=e.classList;e.contains("lyrics-lyricsContent-active")?(r.State="Active",t=r.LayoutOrder):e.contains("lyrics-lyricsContent-unsynced")?r.State="Unsynced":e.contains("lyrics-lyricsContent-highlight")?r.State="Sung":r.State="Unsung"}for(var[i,n]of l){var o="Active"===n.State||"Unsynced"===n.State;let e;e=o?0:void 0===t?4:Math.min(Math.abs(n.LayoutOrder-t),4);o=o?"var(--lyrics-color-active)":"Sung"===n.State?"var(--lyrics-color-passed)":"var(--lyrics-color-inactive)";!1===i.classList.contains("lyric")&&i.classList.add("lyric"),c(i,n),i.style.color="transparent",i.style.textShadow=`0 0 ${e}px `+o}};let i,n;{const o=o=>{var e=Array.from(t.children).indexOf(o);new MutationObserver(r).observe(o,{attributes:!0,attributeFilter:["class"],childList:!1,subtree:!1}),void 0===n&&0===o.innerText.length&&(n=new ResizeObserver(e=>{var t,r,i,n;a=(t=o,t=getComputedStyle(o),r=getComputedStyle(document.documentElement),parseFloat(t.fontSize)/parseFloat(r.fontSize));for([i,n]of l)c(i,n)})).observe(o),l.set(o,{Observer:i,LayoutOrder:e,State:"Unsung"}),r()},s=e=>{e instanceof HTMLDivElement&&e.classList.contains("lyrics-lyricsContent-lyric")&&o(e)};(i=new MutationObserver(e=>{for(const t of e)if("childList"===t.type){for(const r of t.addedNodes)s(r);for(const i of t.removedNodes)i instanceof HTMLDivElement&&l.delete(i)}})).observe(t,{attributes:!1,childList:!0,subtree:!1});for(const e of t.childNodes)s(e)}return()=>{i.disconnect(),null!=n&&n.disconnect();for(const e of l.values())e.Observer.disconnect()}},b=(e,t)=>{var r;e!==y[t]&&(null!=(r=v[t])&&r.call(v),v[t]=void 0,e&&(v[t]=m(e)),y[t]=null!=e?e:void 0)},g=()=>{var e=document.body.querySelector("."+u),t=document.body.querySelector("."+r);b(e,"NowPlaying"),b(t,"FullScreen")};var f=async function(){t(),g(),new MutationObserver(()=>{t(),g()}).observe(document.body,{attributes:!1,childList:!0,subtree:!0})};(async()=>{await f()})()})();(async()=>{var e;document.getElementById("beautifulDlyrics")||((e=document.createElement("style")).id="beautifulDlyrics",e.textContent=String.raw`
  .lyrics-background,.lyrics-lyrics-container{--lyrics-color-inactive:rgb(240 240 240 / 51%)!important}.main-lyricsCinema-controls,.main-nowPlayingView-lyricsControls,.main-nowPlayingView-lyricsTitle button{mix-blend-mode:overlay}.lyric:hover{text-shadow:0 0 0 var(--lyrics-color-active)!important}.lyrics-lyricsContent-active{margin-top:.25em;margin-bottom:.25em}.lyrics-background{overflow:hidden;position:relative}.lyrics-background.main-nowPlayingView-sectionHeaderSpacing.main-nowPlayingView-lyricsGradient,.lyrics-background.os-viewport .lyrics-lyrics-background{background-color:rgba(0,0,0,0)}.lyrics-background.os-viewport{overflow:visible;position:absolute}.lyrics-background.os-viewport>.lyrics-background-container{position:sticky;max-width:35%;max-height:30%;scale:290% 340%;transform-origin:left top;margin-bottom:-18vh}.lyrics-background-container{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:-1;overflow:hidden;border-radius:inherit;filter:saturate(1.5) brightness(.8)}.lyrics-background-back,.lyrics-background-color{width:200%;position:absolute;border-radius:100em;animation:rotate 35s linear infinite}.lyrics-background-color{right:0;top:0;filter:blur(40px);z-index:10;mix-blend-mode:revert}.lyrics-background-back{left:0;bottom:0;filter:blur(40px);z-index:1;animation-direction:reverse;animation-delay:10s}@keyframes rotate{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}
      `.trim(),document.head.appendChild(e))})();